<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>ì¹´ì¹´ì˜¤ë§µ ë…ë¦½ í…ŒìŠ¤íŠ¸</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
        }
        #map {
            width: 100%;
            height: 400px;
            border: 2px solid #ccc;
            border-radius: 8px;
        }
        .info {
            margin: 20px 0;
            padding: 10px;
            background: #f5f5f5;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>ì¹´ì¹´ì˜¤ë§µ ë…ë¦½ í…ŒìŠ¤íŠ¸</h1>
    
    <div class="info">
        <strong>í…ŒìŠ¤íŠ¸ ëª©ì :</strong> Flutter ì—†ì´ ìˆœìˆ˜ HTML/JSë¡œ ì¹´ì¹´ì˜¤ë§µ API ë™ì‘ í™•ì¸
    </div>
    
    <div id="map"></div>
    
    <div class="info">
        <div id="status">í…ŒìŠ¤íŠ¸ ì‹œì‘...</div>
        <div id="debug"></div>
    </div>

    <script>
        const statusDiv = document.getElementById('status');
        const debugDiv = document.getElementById('debug');
        
        function updateStatus(message, isError = false) {
            statusDiv.innerHTML = message;
            statusDiv.style.color = isError ? 'red' : 'green';
            console.log(message);
        }
        
        function addDebug(message) {
            debugDiv.innerHTML += '<br>' + message;
            console.log(message);
        }
        
        // ì¦‰ì‹œ ì‹¤í–‰ìœ¼ë¡œ ë³€ê²½
        updateStatus('ğŸ”„ í…ŒìŠ¤íŠ¸ ì‹œì‘...');
        addDebug('í˜„ì¬ ì‹œê°: ' + new Date().toLocaleString());
        addDebug('í˜„ì¬ URL: ' + window.location.href);
        addDebug('JavaScript í‚¤: 72f1d70089c36f4a8c9fabe7dc6be080');
        
        // 1ë‹¨ê³„: ê¸°ë³¸ ë„¤íŠ¸ì›Œí¬ í…ŒìŠ¤íŠ¸
        addDebug('--- 1ë‹¨ê³„: ê¸°ë³¸ ë„¤íŠ¸ì›Œí¬ í…ŒìŠ¤íŠ¸ ---');
        fetch('https://www.google.com/favicon.ico')
            .then(() => {
                addDebug('âœ… ì¸í„°ë„· ì—°ê²° ì •ìƒ');
                // 2ë‹¨ê³„ë¡œ ì§„í–‰
                testKakaoDomain();
            })
            .catch(() => {
                addDebug('âŒ ì¸í„°ë„· ì—°ê²° ë¬¸ì œ');
                updateStatus('âŒ ì¸í„°ë„· ì—°ê²° ì‹¤íŒ¨', true);
            });
        
        function testKakaoDomain() {
            addDebug('--- 2ë‹¨ê³„: ì¹´ì¹´ì˜¤ ë„ë©”ì¸ í…ŒìŠ¤íŠ¸ ---');
            fetch('https://developers.kakao.com/favicon.ico')
                .then(() => {
                    addDebug('âœ… ì¹´ì¹´ì˜¤ ë„ë©”ì¸ ì ‘ê·¼ ê°€ëŠ¥');
                    loadKakaoScript();
                })
                .catch((error) => {
                    addDebug('âŒ ì¹´ì¹´ì˜¤ ë„ë©”ì¸ ì ‘ê·¼ ë¶ˆê°€: ' + error.message);
                    updateStatus('âŒ ì¹´ì¹´ì˜¤ ì„œë²„ì— ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤', true);
                });
        }
        
        function loadKakaoScript() {
            addDebug('--- 3ë‹¨ê³„: ì¹´ì¹´ì˜¤ë§µ SDK ë¡œë”© ---');
            updateStatus('ğŸ”„ ì¹´ì¹´ì˜¤ë§µ SDK ë¡œë”© ì¤‘...');
            
            const script = document.createElement('script');
            script.type = 'text/javascript';
            script.src = 'https://dapi.kakao.com/v2/maps/sdk.js?appkey=72f1d70089c36f4a8c9fabe7dc6be080';
            
            script.onload = function() {
                addDebug('âœ… ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì´ë²¤íŠ¸ ë°œìƒ');
                setTimeout(checkKakaoSDK, 200);
            };
            
            script.onerror = function(error) {
                updateStatus('âŒ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì‹¤íŒ¨', true);
                addDebug('ì—ëŸ¬ ì´ë²¤íŠ¸: ' + error);
                addDebug('ê°€ëŠ¥í•œ ì›ì¸:');
                addDebug('1) API í‚¤ ì˜ëª»ë¨');
                addDebug('2) ë„ë©”ì¸ì´ ì¹´ì¹´ì˜¤ ê°œë°œì ì½˜ì†”ì— ë¯¸ë“±ë¡');
                addDebug('3) ë°©í™”ë²½/ë³´ì•ˆ ì†Œí”„íŠ¸ì›¨ì–´ ì°¨ë‹¨');
            };
            
            addDebug('ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€ ì¤‘: ' + script.src);
            document.head.appendChild(script);
        }
        
        function checkKakaoSDK() {
            addDebug('--- 4ë‹¨ê³„: ì¹´ì¹´ì˜¤ SDK í™•ì¸ ---');
            if (typeof kakao === 'undefined') {
                updateStatus('âŒ ì¹´ì¹´ì˜¤ SDK ë¡œë“œ ì‹¤íŒ¨ (ìŠ¤í¬ë¦½íŠ¸ëŠ” ë¡œë“œë¨)', true);
                addDebug('kakao ê°ì²´ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                addDebug('ê°€ëŠ¥í•œ ì›ì¸: API í‚¤ ê¶Œí•œ ë¬¸ì œ ë˜ëŠ” ë„ë©”ì¸ ë¯¸ë“±ë¡');
            } else {
                updateStatus('âœ… ì¹´ì¹´ì˜¤ SDK ë¡œë“œ ì„±ê³µ');
                addDebug('kakao ê°ì²´ í™•ì¸: ' + typeof kakao);
                initializeMap();
            }
        }
        
        function initializeMap() {
            addDebug('--- 5ë‹¨ê³„: ì§€ë„ ìƒì„± ---');
            try {
                const container = document.getElementById('map');
                const options = {
                    center: new kakao.maps.LatLng(37.5665, 126.9780),
                    level: 10
                };
                
                const map = new kakao.maps.Map(container, options);
                updateStatus('âœ… ì¹´ì¹´ì˜¤ë§µ ìƒì„± ì„±ê³µ');
                addDebug('ì§€ë„ ê°ì²´ ìƒì„± ì™„ë£Œ');
                
                // ë§ˆì»¤ ì¶”ê°€
                const markerPosition = new kakao.maps.LatLng(37.5665, 126.9780);
                const marker = new kakao.maps.Marker({
                    position: markerPosition,
                    map: map
                });
                
                addDebug('âœ… ëª¨ë“  í…ŒìŠ¤íŠ¸ ì™„ë£Œ!');
                
            } catch (error) {
                updateStatus('âŒ ì§€ë„ ìƒì„± ì‹¤íŒ¨: ' + error.message, true);
                addDebug('ì—ëŸ¬ ìƒì„¸: ' + error.stack);
            }
        }
    </script>
</body>
</html>